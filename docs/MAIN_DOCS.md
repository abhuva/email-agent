# Email Agent â€” Main Documentation Entry Point

This is the top-level guide for all docs, implementation details, and project strategy documents for the Headless AI Email Agent.

## Essential System Docs
- [README.md](../README.md) â€” The actual starting point and summary of all global system info.
- [pdd_V4.md](pdd_V4.md) â€” Product Design Document V4 (âœ… Complete, Current Version), multi-tenant platform with rules engine, multi-account support, and V4-only CLI.
- [pdd.md](../pdd.md) â€” Product Design Document V3 (âœ… Complete, Historical), foundational upgrade with score-based classification, CLI controls, and templating (superseded by V4).
- [pdd_v2.md](../pdd_v2.md) â€” Product Design Document V2 (âœ… Complete, Historical), outlining Obsidian integration and note creation features.
- [prd.md](prd.md) â€” Product Requirements Document

## User Guides
- **[Complete Guide](COMPLETE_GUIDE.md)** â€” Comprehensive user guide covering installation, configuration, usage, Obsidian integration, troubleshooting, and deployment (for end users).
- **[Troubleshooting Guide](TROUBLESHOOTING.md)** â€” Detailed troubleshooting guide with solutions for common issues.

## Deep Dive Module Docs

### V4 Module Documentation (Current)
- See V4 Module Documentation section below for comprehensive V4 docs

### Historical Module Documentation
- [Logging System](logging-system.md) â€” Detailed logging implementation (V1/V2)
- [IMAP Fetching](imap-fetching.md) â€” IMAP implementation details and patterns
- [Prompt Pipeline / Markdown Management](prompts.md) â€” Prompt management system
- [Conditional Summarization System](summarization.md) â€” Summarization system (V2, historical)
- [IMAP Keywords vs Flags](imap-keywords-vs-flags.md) â€” Technical explanation of IMAP flags
- [Live Test Guide](live-test-guide.md) â€” Guide for manual live testing
- [Task Master Project Management](../README-task-master.md) â€” Task management system

## V5 Module Documentation (OAuth Integration - In Development)

### V5 Authentication
- **[V5 Authentication Interfaces](v5-auth-interfaces.md)** â€” Authentication protocols, OAuth providers, and utilities (Task 2) âœ…
- **[V5 Token Manager](v5-token-manager.md)** â€” OAuth token storage, loading, and automatic refresh (Task 4) âœ…
- **[V5 Google OAuth Provider](v5-google-provider.md)** â€” Google OAuth 2.0 provider implementation (Task 5) âœ…
- **[V5 OAuth Flow](v5-oauth-flow.md)** â€” Interactive OAuth flow for CLI-based authentication (Task 7) âœ…

## V4 Module Documentation (Current Production Version)

### Core V4 Features
- **[V4 Configuration System](v4-configuration.md)** â€” Multi-tenant configuration with account-specific overrides (Tasks 1-3) âœ…
- **[V4 Configuration Schema Reference](v4-config-schema-reference.md)** â€” Complete schema reference with all settings, types, defaults, and relationships (Task 14.1) âœ…
- **[V4 CLI Usage](v4-cli-usage.md)** â€” Complete command-line interface reference and usage guide âœ…
- **[V4 Models](v4-models.md)** â€” EmailContext data class for pipeline state tracking (Task 4) âœ…
- **[V4 Content Parser](v4-content-parser.md)** â€” HTML to Markdown conversion with fallback (Task 5) âœ…
- **[V4 Rules Engine](v4-rules-engine.md)** â€” Blacklist and whitelist rules for email filtering (Tasks 6-7) âœ…
- **[V4 Account Processor](v4-account-processor.md)** â€” Isolated per-account email processing pipeline (Tasks 8-9) âœ…
- **[V4 Master Orchestrator](v4-orchestrator.md)** â€” Multi-account orchestrator with CLI integration (Task 10) âœ…
- **[V4 Enhanced Logging System](v4-logging-system.md)** â€” Centralized logging with context, account lifecycle tracking, and configuration override logging (Task 12) âœ…
- **[V4 Progress Bars](v4-progress-bars.md)** â€” Progress indicators for email fetching, content parsing, LLM processing, and note generation (Task 13) âœ…
- **[Scoring Criteria](scoring-criteria.md)** â€” Email scoring criteria and thresholds âœ…

### V4 Advanced Features
- **[V4 Installation & Setup](v4-installation-setup.md)** â€” Installation, setup, and initial configuration guide âœ…
- **[V4 Quick Start](v4-quick-start.md)** â€” Minimal setup guide to get V4 running quickly âœ…
- **[V4 Configuration Reference](v4-configuration-reference.md)** â€” Complete configuration reference with all options and examples âœ…
- **[V4 Rule Syntax Guide](v4-rule-syntax-guide.md)** â€” Complete rule syntax reference for blacklist and whitelist rules âœ…
- **[V4 Migration Guide](v4-migration-guide.md)** â€” Step-by-step guide for migrating from V3 to V4 âœ…
- **[V4 Multi-Account Best Practices](v4-multi-account-best-practices.md)** â€” Best practices for multi-account deployments âœ…
- **[V4 Troubleshooting](v4-troubleshooting.md)** â€” Comprehensive troubleshooting guide for common V4 issues âœ…

### V4 Testing & CI/CD
- **[V4 Unit Tests](v4-unit-tests.md)** â€” Comprehensive unit tests for all V4 core components (Task 16) âœ…
- **[V4 Integration Tests](v4-integration-tests.md)** â€” Component interaction tests with mock services (Task 17) âœ…
- **[V4 E2E Test Setup Guide](v4-e2e-test-setup.md)** â€” Guide for setting up real test email accounts and secure configuration (Task 19.1) âœ…
- **[V4 E2E Test Environment](v4-e2e-test-environment.md)** â€” Test environment setup with fixtures and data seeding (Task 19.2) âœ…
- **[V4 E2E Test Scenarios](v4-e2e-test-scenarios.md)** â€” Comprehensive test scenarios covering all pipeline features (Task 19.3) âœ…
- **[V4 E2E Test Execution Guide](v4-e2e-test-execution.md)** â€” Guide for executing, analyzing, and iterating on E2E test runs (Task 19.5) âœ…
- **[CI Integration](ci-integration.md)** â€” CI/CD configuration and test automation âœ…

## Historical V3 Module Documentation

### Core V3 Features (Historical - Superseded by V4)
- **[V3 Configuration Guide](v3-configuration.md)** â€” V3 configuration system, schema, and settings facade (Historical) âœ…
- **[V3 Migration Guide](v3-migration-guide.md)** â€” Migrating from V2 to V3 configuration patterns (Historical) âœ…
- **[V3 CLI](v3-cli.md)** â€” V3 command-line interface (Historical - superseded by V4 CLI) âœ…
- **[V3 IMAP Client](v3-imap-client.md)** â€” IMAP connection and email retrieval (Historical) âœ…
- **[V3 LLM Client](v3-llm-client.md)** â€” LLM API interactions with retry logic (Historical) âœ…
- **[V3 Decision Logic](v3-decision-logic.md)** â€” Threshold-based classification system (Historical) âœ…
- **[V3 Note Generator](v3-note-generator.md)** â€” Jinja2 templating system for Markdown note generation (Historical) âœ…
- **[V3 Logging Integration](v3-logging-integration.md)** â€” Dual logging system (operational logs + structured analytics) (Historical) âœ…
- **[V3 Orchestrator](v3-orchestrator.md)** â€” High-level pipeline orchestration coordinating all components (Historical) âœ…

### V3 Advanced Features (Historical)
- **[V3 Force-Reprocess](v3-force-reprocess.md)** â€” Force-reprocess capability for reprocessing already-processed emails (Historical) âœ…
- **[V3 Cleanup Flags](v3-cleanup-flags.md)** â€” Safeguarded command to remove application-specific IMAP flags (Historical) âœ…
- **[V3 Backfill](v3-backfill.md)** â€” Process historical emails with date range filtering, progress tracking, and throttling (Historical) âœ…
- **[V3 Dry-Run Mode](v3-dry-run.md)** â€” Preview processing without making changes (Historical) âœ…

### V3 Testing & CI/CD (Historical)
- **[V3 E2E Tests](v3-e2e-tests.md)** â€” End-to-end tests with live IMAP connections (Historical) âœ…
- **[Test Isolation Fix](test-isolation-fix.md)** â€” Settings singleton reset fixture for test isolation (Historical) âœ…


## Analysis & Reports
- **[Documentation Audit 2026](documentation-audit-2026.md)** â€” Comprehensive documentation audit and consolidation (Task 17) ðŸ”„
- **[Code Cleanup Assessment 2026](code-cleanup-assessment-2026.md)** â€” Code quality assessment (Task 16.1) âœ…
- **[V3 PDD Task Alignment](V3_PDD_TASK_ALIGNMENT_ANALYSIS.md)** â€” PDD task alignment analysis
- **[Documentation Consolidation Plan](DOCUMENTATION_CONSOLIDATION_PLAN.md)** â€” Documentation consolidation strategy

## Historical Documentation
The following documents provide historical context and implementation decisions:
- [Refactoring Flags Plan](refactoring-flags-plan.md) â€” Historical refactoring plan for IMAP flags
- [Refactoring Flags Summary](refactoring-flags-summary.md) â€” Summary of flags refactoring
- [Code Review 2026-01](CODE_REVIEW_2026-01.md) â€” Code review findings and cleanup
- [Task 16 Proposal](TASK_16_PROPOSAL.md) â€” IMAP query filtering system proposal
- [Cleanup Report 2026-01](CLEANUP_REPORT_2026-01.md) â€” Codebase cleanup analysis
- [Cleanup Verification Report](CLEANUP_VERIFICATION_REPORT.md) â€” Cleanup verification results

## Onboarding / Loading AI Context
1. Read the [README](../README.md) for system structure and tasking.
2. Open [pdd_V4.md](pdd_V4.md) for current V4 requirements and roadmap (we're working on V4 now).
3. Use Task Master CLI: `task-master list`, `task-master next` for current project todo/context state.
4. Browse module docs for implementation specifics and quick code/testing examples.

> **For Cursor or AI Agents:**
> - Always load this file and README.md first!
> - Then, review the PDD V4 and module docs as needed.
> - **Current Version:** V4 (Orchestrator) - see [pdd_V4.md](pdd_V4.md)
> - **V4 Status:** âœ… **Complete and Production-Ready** - All features implemented and tested
>   - Core: Multi-account configuration, Rules Engine, Content Parser, Account Processor, Master Orchestrator, V4 CLI
>   - Advanced: Multi-account processing, Account isolation, Safety interlock, Progress bars
>   - Testing: Comprehensive test suite with unit, integration, and E2E tests
>   - CI/CD: Automated testing and quality checks
> - **Historical Versions:** V1, V2, and V3 are historical. V4 is the current production version.

> **For End Users:**
> - Start with the [Complete Guide](COMPLETE_GUIDE.md) for installation and usage
> - Refer to [Troubleshooting Guide](TROUBLESHOOTING.md) if you encounter issues

---
*See README.md for FAQ, upgrade policy, and human+AI best practices.*