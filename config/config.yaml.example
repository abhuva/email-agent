# Example configuration for email-agent
# Copy this file to config.yaml and customize for your setup

imap:
  server: 'imap.example.com'          # Your IMAP server hostname
  port: 993                            # IMAP port (993 for SSL, 143 for STARTTLS)
  username: 'your-email@example.com'   # Your email address
  password_env: 'IMAP_PASSWORD'        # Environment variable name for password

# IMAP search queries (list of IMAP search criteria)
# Examples:
#   - 'UNSEEN'           # Unread emails (default)
#   - 'ALL'              # All emails
#   - 'FROM "sender@example.com"'  # From specific sender
#   - 'SUBJECT "important"'        # With specific subject
# The processed_tag exclusion (AIProcessed) is automatically added to exclude already processed emails
# NOTE: For V2, use imap_query (singular) instead. imap_queries is kept for backward compatibility.
imap_queries:
  - 'UNSEEN'

# V2: Primary IMAP query string (takes precedence over imap_queries if set)
# Examples:
#   imap_query: 'UNSEEN'                    # Unread emails
#   imap_query: 'UNSEEN SENTSINCE 07-Jan-2026'  # Unread emails sent from today onwards (update date as needed)
#   imap_query: 'ALL'                       # All emails
#   imap_query: 'SENTSINCE 01-Jan-2024'     # All emails sent since specific date
#   imap_query: 'SINCE 01-Jan-2024'         # All emails received since specific date (uses internal date)
#   imap_query: 'FROM "sender@example.com"'  # From specific sender
# The ObsidianNoteCreated exclusion is automatically added to exclude already processed emails
# Note: 
#   - IMAP date format is DD-MMM-YYYY (e.g., 07-Jan-2026)
#   - SENTSINCE filters by Date header (sent date) - use this for filtering by when email was sent
#   - SINCE filters by internal date (received date) - use this for filtering by when email was received
imap_query: 'UNSEEN'

# Path to the Markdown prompt file used for AI classification
prompt_file: 'config/prompt.md'

# Mapping from AI response keywords to IMAP tag names
tag_mapping:
  urgent: 'Urgent'    # Tag for urgent/important emails
  neutral: 'Neutral'  # Default/fallback tag
  spam: 'Spam'        # Tag for spam emails

# Tag name for emails that have been processed by the AI
processed_tag: 'AIProcessed'

# Maximum characters to send to AI (truncates longer emails)
max_body_chars: 4000

# Maximum number of emails to process per run
max_emails_per_run: 15

# Logging configuration
log_file: 'logs/agent.log'            # Path to log file
log_level: 'INFO'                     # Log level: DEBUG, INFO, WARNING, ERROR
analytics_file: 'logs/analytics.jsonl' # Path to analytics JSONL file

# OpenRouter API configuration
openrouter:
  api_key_env: 'OPENROUTER_API_KEY'   # Environment variable name for API key
  api_url: 'https://openrouter.ai/api/v1'
  # Model to use (optional, defaults to openai/gpt-3.5-turbo if not specified)
  model: 'google/gemini-2.5-flash-lite-preview-09-2025'
  # Alternative models you can use:
  # model: 'openai/gpt-3.5-turbo'
  # model: 'openai/gpt-4o-mini'
  # model: 'anthropic/claude-3-haiku'

# V2: Obsidian Integration Configuration
# Path to the Obsidian vault directory where email notes will be created
# This directory must exist - the script will fail if it doesn't
obsidian_vault_path: '/path/to/obsidian/vault/emails'

# V2: List of IMAP tags that trigger AI summarization
# Only emails with these tags will have summaries generated (saves API costs)
# Examples:
#   summarization_tags: ['Urgent', 'Important']
#   summarization_tags: ['Urgent']  # Only urgent emails get summaries
#   summarization_tags: []          # No summarization (base notes only)
summarization_tags:
  - 'Urgent'

# V2: Path to the Markdown prompt file used for email summarization
# This prompt is separate from the classification prompt and is only used
# when an email has a tag matching one in summarization_tags
summarization_prompt_path: 'config/summarization_prompt.md'

# V2: Path to the changelog/audit log file
# This file tracks all processed emails in a Markdown table format
# The file will be created if it doesn't exist
changelog_path: 'logs/email_changelog.md'
